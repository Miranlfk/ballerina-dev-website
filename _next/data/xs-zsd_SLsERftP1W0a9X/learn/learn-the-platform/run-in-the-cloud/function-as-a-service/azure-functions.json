{"pageProps":{"frontmatter":{"layout":"ballerina-cloud-left-nav-pages-swanlake","title":"Azure Functions","description":"Learn how to write and deploy Azure Functions using ballerina","keywords":"ballerina, programming language, serverless, cloud, azure, functions, cloud native","permalink":"/learn/run-ballerina-programs-in-the-cloud/function-as-a-service-with-ballerina/azure-functions/","active":"azure-functions","intro":"The Azure Functions extension provides the functionality to expose a Ballerina function as a serverless function in the Azure Functions platform."},"content":"\nAzure Functions is an event driven, serverless computing platform. Azure Functions can be written from Ballerina using the listeners and services provided by Azure Functions package. This example demonstrates using an HTTP trigger to invoke the function, and an HTTP output binding to respond to the caller with a message based on the query parameter sent from the request.\n\nIn Ballerina, `triggers` are represented by `listeners`. When the `af:HttpListener` gets attached to the service, it implies that the function is an HTTP Trigger. The resource method behaves exactly the same as a service written from `ballerina/http`. It supports `http:Payload, http:Header` annotations for parameters. Input binding annotations can be used to annotate parameters to make use of external services in Azure. If no annotations are specified for a parameter, it is identified as a query parameter.\n\nOutput bindings are defined in the return type definition. For services with the `HttpListener` attachment, `HttpOutput` is the default output binding. You can override the default behavior by specifying them explicitly in the return type. For example, see [HTTP Ttrigger](/learn/by-example/azure-functions-http-trigger).\n\n## Supported triggers and bindings\n\nAn Azure Function consists of a trigger and optional bindings. A trigger defines how a function is invoked. A binding is an approach in which you can declaratively connect other resources to the function. There are *input* and *output* bindings. An input binding is a source of data into the function. An output binding allows outputting data from the function to an external resource. For more information, go to <a href=\"https://docs.microsoft.com/en-us/azure/azure-functions/functions-triggers-bindings\" target=\"_blank\">Azure Functions triggers and bindings concepts</a>.\n\nThe following Azure Functions triggers and bindings are currently supported in Ballerina:\n- HTTP <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#HttpTrigger\" target=\"_blank\">trigger</a> and <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#HttpOutput\" target=\"_blank\">ouput</a> binding\n- Queue <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#QueueTrigger\" target=\"_blank\">trigger</a> and <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#QueueOutput\" target=\"_blank\">ouput</a> binding\n- Blob <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#BlobTrigger\" target=\"_blank\">trigger</a>, <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#BlobInput\" target=\"_blank\">input</a> binding, and <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#BlobOutput\" target=\"_blank\">output</a> binding\n- Twilio SMS <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#TwilioSmsOutput\" target=\"_blank\">output</a> binding\n- CosmosDB <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#CosmosDBTrigger\" target=\"_blank\">trigger</a>, <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#CosmosDBInput\" target=\"_blank\">input</a> binding, and <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#CosmosDBOutput\" target=\"_blank\">output</a> binding\n- Timer <a href=\"https://lib.ballerina.io/ballerinax/azure_functions/latest#TimerTrigger\" target=\"_blank\">trigger</a>\n\n## Set up the prerequisites\n\nSet up the prerequisites below to work with Azure Functions using Ballerina.\n\n### Set up Ballerina\n\nInstall the [latest Ballerina distribution](https://ballerina.io/downloads/).\n\n### Set up Azure Functions \n\nFollow the steps below to set up the Azure Functions.\n\n1. Install the <a href=\"https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest\" target=\"_blank\">Azure CLI</a>.\n2. Install and configure [Functions Core Tools](https://learn.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=v4%2Clinux%2Ccsharp%2Cportal%2Cbash#install-the-azure-functions-core-tools).\n3. Login to the Azure CLI by executing the `az login` command on CLI.\n4. Create an <a href=\"https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-function-app-portal\" target=\"_blank\">Azure Function app</a> with the given resource group with following requirements.\n>**Note:** Make sure to remember the function application name and storage account name as they will be required in the code samples.\n   - Runtime stack - `Java 11`\n   - Hosting operating system - `Windows` (Currently, Linux is not supported in Azure by default for custom handlers.)\n\n## Write the function\n\nThe following Ballerina code gives an example of using an HTTP trigger to invoke the function, and an HTTP output binding to respond to the caller with a message based on the query parameter sent from the request. \n\n```ballerina\nimport ballerinax/azure_functions as af;\n\nservice / on new af:HttpListener() {\n    resource function get hello(string name) returns string {\n        return \"Hello, \" + name + \"!\";\n    }\n}\n```\n\n## Build the function\n\nThe Azure Functions functionality is implemented as a compiler extension. Thus, artifact generation happens automatically when you build a Ballerina module. \n\n## Deploy the function\n\nThe created function app name should be provided to the placeholders shown in the above-generated usage instructions from the compiler. \n\n## Invoke the function\n\nThe deployed Azure Function can be tested by invoking it using an HTTP client such as cURL.\n\n## Learn more\n\nFor examples on using AWS Lambda functions, see the below.\n\n- [Hello world](/learn/by-example/azure-functions-hello-world/)\n- [Context execution](/learn/by-example/azure-functions-timer-trigger/)\n- [S3 trigger](/learn/by-example/azure-functions-http-trigger/)\n- [DynamoDB trigger](/learn/by-example/azure-functions-cosmosdb-trigger/)\n","id":"azure-functions","sub":"run-in-the-cloud","third":"function-as-a-service","slug":"run-in-the-cloud/function-as-a-service/azure-functions","codes":"[[1325067264,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerinax/azure_functions </span><span style=\\\"color: #D73A49\\\">as</span><span style=\\\"color: #24292E\\\"> af;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">service</span><span style=\\\"color: #24292E\\\"> / </span><span style=\\\"color: #D73A49\\\">on</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> af:HttpListener() {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">get</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">hello</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">name</span><span style=\\\"color: #24292E\\\">) </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Hello, &quot;</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">+</span><span style=\\\"color: #24292E\\\"> name </span><span style=\\\"color: #D73A49\\\">+</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;!&quot;</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"]]"},"__N_SSG":true}